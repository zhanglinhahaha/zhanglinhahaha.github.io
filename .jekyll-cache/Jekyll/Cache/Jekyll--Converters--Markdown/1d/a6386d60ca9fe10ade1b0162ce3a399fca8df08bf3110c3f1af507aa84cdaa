I"ÎG<h3 id="ç®€ä»‹">ç®€ä»‹</h3>
<p>è¿™ä¸ªä¸“æ æ˜¯é˜…è¯»â€è®¾è®¡æ¨¡å¼ä¹‹ç¦…â€ç¬¬äºŒç‰ˆåšçš„é˜…è¯»ç¬”è®°ã€‚
å°†ä¹¦ä¸­éƒ¨åˆ†çš„ä¾‹å­ä»javaæ”¹æˆc++</p>
<h3 id="å•ä¸€èŒè´£åŸåˆ™single-responsibility-principle">å•ä¸€èŒè´£åŸåˆ™(Single Responsibility Principle)</h3>
<p>define: There should never be more than one reason for a class to change.
å•ä¸€èŒè´£åŸåˆ™çš„å®šä¹‰æ˜¯:åº”è¯¥æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªåŸå› å¼•èµ·ç±»çš„å˜æ›´ã€‚
åˆ†æ­§ç‚¹ï¼šå¦‚ä½•å¯¹ä¸€ä¸ªç±»è¿›è¡ŒèŒè´£åˆ’åˆ†
adviceï¼šæ¥å£ä¸€å®šè¦åšåˆ°å•ä¸€èŒè´£,ç±»çš„è®¾è®¡å°½é‡åšåˆ°åªæœ‰ä¸€ä¸ªåŸå› å¼•èµ·å˜åŒ–
ä¹¦ä¸­ä¹Ÿè¡¨æ˜ï¼Œåœ¨å®é™…é¡¹ç›®ä¸­å¾ˆéš¾å®ç°å•ä¸€èŒè´£ï¼Œä½†æ˜¯è¿™ä¸èƒ½å¦å®šè¿™ä¸ªåŸåˆ™çš„ä¼˜ç‚¹ã€‚</p>

<h3 id="é‡Œæ°æ›¿æ¢åŸåˆ™liskov-substitution-principle">é‡Œæ°æ›¿æ¢åŸåˆ™(Liskov Substitution Principle)</h3>
<p>define: If for each object o1 of type S there is an object o2 of type T such that for all programs P defined in terms of T,the behavior of P is unchanged when o1 is substituted for o2 then S is a subtype of T.
(å¦‚æœå¯¹æ¯ä¸€ä¸ªç±»å‹ä¸ºSçš„å¯¹è±¡o1,éƒ½æœ‰ç±»å‹ä¸ºTçš„å¯¹è±¡o2,ä½¿å¾—ä»¥Tå®šä¹‰çš„æ‰€æœ‰ç¨‹åºPåœ¨æ‰€æœ‰çš„å¯¹è±¡o1éƒ½ä»£æ¢æˆo2æ—¶,ç¨‹åºPçš„è¡Œä¸ºæ²¡æœ‰å‘ç”Ÿå˜åŒ–,é‚£ä¹ˆç±»å‹Sæ˜¯ç±»å‹Tçš„å­ç±»å‹ã€‚)
é€šä¿—ç‚¹è®²,åªè¦çˆ¶ç±»èƒ½å‡ºç°çš„åœ°æ–¹å­ç±»å°±å¯ä»¥å‡ºç°,è€Œä¸”æ›¿æ¢ä¸ºå­ç±»ä¹Ÿä¸ä¼šäº§ç”Ÿä»»ä½•é”™è¯¯æˆ–å¼‚å¸¸,ä½¿ç”¨è€…å¯èƒ½æ ¹æœ¬å°±ä¸éœ€è¦çŸ¥é“æ˜¯çˆ¶ç±»è¿˜æ˜¯å­ç±»ã€‚ä½†æ˜¯,åè¿‡æ¥å°±ä¸è¡Œäº†,æœ‰å­ç±»å‡ºç°çš„åœ°æ–¹,çˆ¶ç±»æœªå¿…å°±èƒ½é€‚åº”ã€‚
å«ä¹‰:
1 å­ç±»å¿…é¡»å®Œå…¨å®ç°çˆ¶ç±»çš„æ–¹æ³•
ps:
åœ¨ç±»ä¸­è°ƒç”¨å…¶ä»–ç±»æ—¶åŠ¡å¿…è¦ä½¿ç”¨çˆ¶ç±»æˆ–æ¥å£,å¦‚æœä¸èƒ½ä½¿ç”¨çˆ¶ç±»æˆ–æ¥å£,åˆ™è¯´æ˜ç±»çš„è®¾è®¡å·²ç»è¿èƒŒäº†LSPåŸåˆ™ã€‚
å¦‚æœå­ç±»ä¸èƒ½å®Œæ•´åœ°å®ç°çˆ¶ç±»çš„æ–¹æ³•,æˆ–è€…çˆ¶ç±»çš„æŸäº›æ–¹æ³•åœ¨å­ç±»ä¸­å·²ç»å‘ç”Ÿâ€œç•¸å˜â€,åˆ™å»ºè®®æ–­å¼€çˆ¶å­ç»§æ‰¿å…³ç³»,é‡‡ç”¨ä¾èµ–ã€èšé›†ã€ç»„åˆç­‰å…³ç³»ä»£æ›¿ç»§æ‰¿ã€‚
eg.
ç©å…·æªä¸èƒ½ç»§æ‰¿CsæŠ½è±¡æªçš„ç±»ï¼Œå› ä¸ºç©å…·æªä¸å…·å¤‡å‡»æ€æ•Œäººçš„æ•ˆæœã€‚
2 å­ç±»å¯ä»¥æœ‰è‡ªå·±çš„ä¸ªæ€§
å­ç±»å‡ºç°çš„åœ°æ–¹çˆ¶ç±»æœªå¿…å¯ä»¥å‡ºç°ï¼Œå› ä¸ºå­ç±»æœ‰å¯èƒ½å¸¦æœ‰è‡ªå·±çš„ä¸ªæ€§ã€‚
3 è¦†ç›–æˆ–å®ç°çˆ¶ç±»çš„æ–¹æ³•æ—¶è¾“å…¥å‚æ•°å¯ä»¥è¢«æ”¾å¤§
4 è¦†å†™æˆ–å®ç°çˆ¶ç±»çš„æ–¹æ³•æ—¶åˆå‡ºç»“æœå¯ä»¥è¢«ç¼©å°
ä¹¦ä¸­çš„ä¾‹å­:</p>
<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include &lt;iostream&gt;
</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">AbstractGun</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">shoot</span><span class="p">()</span> <span class="p">{}</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">Soldier</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="kt">void</span> <span class="n">setGun</span><span class="p">(</span><span class="n">AbstractGun</span><span class="o">&amp;</span> <span class="n">gun</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">mgun</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">gun</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kt">void</span> <span class="n">killEnemy</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"å£«å…µå¼€å§‹å‡»æ€æ•Œäºº..."</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
        <span class="n">mgun</span><span class="o">-&gt;</span><span class="n">shoot</span><span class="p">();</span>
    <span class="p">}</span>
<span class="nl">private:</span>
    <span class="n">AbstractGun</span> <span class="o">*</span><span class="n">mgun</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">Handgun</span> <span class="o">:</span> <span class="k">public</span> <span class="n">AbstractGun</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">shoot</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"æ‰‹æªå°„å‡»..."</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">Rifle</span> <span class="o">:</span> <span class="k">public</span> <span class="n">AbstractGun</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">shoot</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"æ­¥æªå°„å‡»..."</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>


<span class="k">class</span> <span class="nc">Machinegun</span> <span class="o">:</span> <span class="k">public</span> <span class="n">AbstractGun</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">shoot</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"æœºæªæ‰«å°„..."</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">AK47</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Rifle</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">shoot</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"AK47å°„å‡»..."</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">AUG</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Rifle</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="kt">void</span> <span class="n">zoomOut</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"é€šè¿‡æœ›è¿œé•œæŸ¥çœ‹æ•Œäºº..."</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kt">void</span> <span class="n">shoot</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"AUGå°„å‡»..."</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">Snipper</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="kt">void</span> <span class="n">killEnemy</span><span class="p">(</span><span class="n">AUG</span><span class="o">&amp;</span> <span class="n">aug</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">aug</span><span class="p">.</span><span class="n">zoomOut</span><span class="p">();</span>
        <span class="n">aug</span><span class="p">.</span><span class="n">shoot</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="kt">void</span> <span class="nf">test1</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">Soldier</span> <span class="n">zl</span><span class="p">;</span>
    <span class="n">Rifle</span> <span class="n">gun</span><span class="p">;</span>
    <span class="n">zl</span><span class="p">.</span><span class="n">setGun</span><span class="p">(</span><span class="n">gun</span><span class="p">);</span>
    <span class="n">zl</span><span class="p">.</span><span class="n">killEnemy</span><span class="p">();</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">test2</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">Snipper</span> <span class="n">san</span><span class="p">;</span>
    <span class="n">AUG</span> <span class="n">aug</span><span class="p">;</span>
    <span class="n">san</span><span class="p">.</span><span class="n">killEnemy</span><span class="p">(</span><span class="n">aug</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

</code></pre></div></div>

<h3 id="ä¾èµ–å€’ç½®åŸåˆ™dependence-inversion-principle">ä¾èµ–å€’ç½®åŸåˆ™(Dependence Inversion Principle)</h3>
<p>define: High level modules should not depend upon low level modules.Both should depend upon abstractions.Abstractions should not depend upon details.Details should depend upon abstractions.
é«˜å±‚æ¨¡å—ä¸åº”è¯¥ä¾èµ–åº•å±‚æ¨¡å—ï¼Œä¸¤ä¸ªéƒ½åº”è¯¥ä¾èµ–æŠ½è±¡
æŠ½è±¡ä¸ä¾èµ–å®ç°ï¼Œå®ç°ä¾èµ–æŠ½è±¡</p>

<p>é¢å‘å¯¹è±¡è®¾è®¡ OOD(Object-Oriented Design)
æ¨¡å—é—´çš„ä¾èµ–é€šè¿‡æŠ½è±¡å‘ç”Ÿï¼Œå®ç°ç±»ä¹‹é—´ä¸å‘ç”Ÿç›´æ¥çš„ä¾èµ–å…³ç³»ï¼Œå…¶ä¾èµ–å…³ç³»æ˜¯é€šè¿‡æ¥å£æˆ–æŠ½è±¡ç±»äº§ç”Ÿçš„
æ¥å£æˆ–æŠ½è±¡ç±»ä¸ä¾èµ–äºå®ç°ç±»
å®ç°ç±»ä¾èµ–æ¥å£æˆ–æŠ½è±¡ç±»</p>

<p>å‡å°‘ç±»é—´çš„è€¦åˆæ€§ï¼Œæé«˜ç³»ç»Ÿçš„ç¨³å®šæ€§ï¼Œé™ä½å¹¶è¡Œå¼€å‘å¼•èµ·çš„é£é™©ï¼Œæé«˜ä»£ç å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§</p>

<p>ä¸‰ç§å†™æ³•
1 æ„é€ å‡½æ•°ä¼ é€’ä¾èµ–å¯¹è±¡</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">IDriver</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">drive</span><span class="p">()</span> <span class="p">{}</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">Driver</span> <span class="o">:</span> <span class="k">public</span> <span class="n">IDriver</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="n">Driver</span><span class="p">(</span><span class="n">ICar</span><span class="o">*</span> <span class="n">car</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">mcar</span> <span class="o">=</span> <span class="n">car</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">drive</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">mcar</span><span class="o">-&gt;</span><span class="n">run</span><span class="p">();</span>
    <span class="p">}</span>
<span class="nl">private:</span>
    <span class="n">ICar</span><span class="o">*</span> <span class="n">mcar</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div></div>

<p>2 Setteræ–¹æ³•ä¼ é€’ä¾èµ–å¯¹è±¡</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">IDriver</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">setCar</span><span class="p">(</span><span class="n">ICar</span> <span class="o">*</span><span class="n">car</span><span class="p">)</span> <span class="p">{}</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">drive</span><span class="p">()</span> <span class="p">{}</span>
<span class="p">};</span>
<span class="k">class</span> <span class="nc">Driver</span> <span class="o">:</span> <span class="k">public</span> <span class="n">IDriver</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">setCar</span><span class="p">(</span><span class="n">ICar</span> <span class="o">*</span><span class="n">car</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">mcar</span> <span class="o">=</span> <span class="n">car</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">drive</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">mcar</span><span class="o">-&gt;</span><span class="n">run</span><span class="p">();</span>
    <span class="p">}</span>
<span class="nl">private:</span>
    <span class="n">ICar</span><span class="o">*</span> <span class="n">mcar</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div></div>

<p>3 æ¥å£å£°æ˜ä¾èµ–å¯¹è±¡(ä¹Ÿå«æ¥å£æ³¨å…¥)</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">IDriver</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">drive</span> <span class="p">(</span><span class="n">ICar</span> <span class="o">*</span><span class="n">car</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">};</span>
<span class="k">class</span> <span class="nc">Driver</span> <span class="o">:</span> <span class="k">class</span> <span class="nc">IDriver</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">drive</span> <span class="p">(</span><span class="n">ICar</span> <span class="o">*</span><span class="n">car</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">car</span><span class="o">-&gt;</span><span class="n">run</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">};</span>
</code></pre></div></div>

<p>ä¾èµ–å€’ç½®åŸåˆ™çš„æœ¬è´¨å°±æ˜¯é¢å‘æ¥å£ç¼–ç¨‹ï¼Œåˆ©ç”¨æ¥å£æŠ½è±¡ç±»å®ç°å„ä¸ªç±»æˆ–æ¨¡å—é—´å®ç°ç‹¬ç«‹ï¼Œä¸ç›¸äº’å½±å“ï¼Œå®ç°æ¨¡å—é—´çš„æ¾è€¦åˆã€‚
åœ¨å®é™…é¡¹ç›®ä¸­ä½¿ç”¨è§„åˆ™ï¼š
1 æ¯ä¸ªç±»å°½é‡éƒ½æœ‰æ¥å£æˆ–æŠ½è±¡ç±»ï¼Œè¿™æ˜¯ä¾èµ–å€’ç½®åŸåˆ™çš„åŸºæœ¬è¦æ±‚ã€‚
2 å˜é‡çš„è¡¨é¢ç±»å‹å°½é‡æ˜¯æ¥å£æˆ–æŠ½è±¡ç±»ï¼Œè¡¨é¢ç±»å‹æ˜¯åœ¨å®šä¹‰çš„æ—¶å€™èµ‹äºˆçš„ç±»å‹ï¼Œå®é™…ç±»å‹æ˜¯å¯¹è±¡çš„ç±»å‹ã€‚
3 ä»»ä½•ç±»éƒ½ä¸åº”è¯¥ä»å…·ä½“ç±»æ´¾ç”Ÿ
4 å°½é‡ä¸è¦è¦†å†™åŸºç±»å·²ç»å®ç°çš„æ–¹æ³•
5 ç»“åˆé‡Œæ°æ›¿æ¢åŸåˆ™ä½¿ç”¨
ä¹¦ä¸­çš„ä¾‹å­:</p>
<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include &lt;iostream&gt;
</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">ICar</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">run</span><span class="p">()</span> <span class="p">{}</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">Benz</span> <span class="o">:</span> <span class="k">public</span> <span class="n">ICar</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">run</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"run Benz...."</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">BWM</span> <span class="o">:</span> <span class="k">public</span> <span class="n">ICar</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">run</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"run BWM...."</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">IDriver</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">drive</span> <span class="p">(</span><span class="n">ICar</span> <span class="o">*</span><span class="n">car</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">Driver</span> <span class="o">:</span> <span class="k">public</span> <span class="n">IDriver</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">drive</span> <span class="p">(</span><span class="n">ICar</span> <span class="o">*</span><span class="n">car</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">car</span><span class="o">-&gt;</span><span class="n">run</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="kt">void</span> <span class="nf">test0</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">Driver</span> <span class="n">zl</span><span class="p">;</span>
    <span class="n">zl</span><span class="p">.</span><span class="n">drive</span><span class="p">(</span><span class="k">new</span> <span class="n">Benz</span><span class="p">());</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">test0</span><span class="p">();</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

</code></pre></div></div>
:ET