I"Œo<p>æœ¬ä¹¦ä¸ºPrimer C++ ä¸­æ–‡ç¬¬äº”ç‰ˆ</p>
<h2 id="ç»ƒä¹ é¢˜ç¬”è®°">ç»ƒä¹ é¢˜ç¬”è®°</h2>
<p><img src="https://img-blog.csdnimg.cn/20191107133347172.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="mf">15.1</span><span class="p">)</span>
<span class="err">è™šå‡½æ•°ï¼šåŸºç±»å¸Œæœ›æ´¾ç”Ÿç±»è¿›è¡Œè¦†ç›–çš„å‡½æ•°</span>
<span class="p">(</span><span class="mf">15.2</span><span class="p">)</span>
<span class="err">æ´¾ç”Ÿç±»å¯ä»¥ç»§æ‰¿å®šä¹‰åœ¨åŸºç±»çš„æˆå‘˜ï¼Œä½†æ˜¯æ´¾ç”Ÿç±»çš„å‡½æ•°ä¸ä¸€å®šæœ‰æƒè®¿é—®åŸºç±»ç»§æ‰¿è€Œæ¥çš„æˆå‘˜ã€‚</span>
<span class="err">æ´¾ç”Ÿç±»å¯ä»¥è®¿é—®å…¬æœ‰æˆå‘˜ï¼Œä¸èƒ½è®¿é—®ç§æœ‰æˆå‘˜ã€‚</span>
<span class="err">å®šä¹‰å—ä¿æŠ¤çš„æˆå‘˜ä½¿å¾—æ´¾ç”Ÿç±»å¯ä»¥è®¿é—®ï¼Œè€Œå…¶ä»–ç”¨æˆ·ç¦æ­¢è®¿é—®</span>
<span class="p">(</span><span class="mf">15.3</span><span class="p">)</span>
<span class="cp">#ifndef QUOTE_H
#define QUOTE_H
#include &lt;iostream&gt;
</span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Quote</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="n">Quote</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span>
    <span class="n">Quote</span><span class="p">(</span><span class="k">const</span> <span class="n">string</span> <span class="o">&amp;</span><span class="n">book</span><span class="p">,</span> <span class="kt">double</span> <span class="n">sales_price</span><span class="p">)</span> <span class="o">:</span> <span class="n">bookNo</span><span class="p">(</span><span class="n">book</span><span class="p">),</span> <span class="n">price</span><span class="p">(</span><span class="n">sales_price</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
    <span class="n">string</span> <span class="n">isbn</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">bookNo</span><span class="p">;}</span>
    <span class="k">virtual</span> <span class="kt">double</span> <span class="n">net_price</span><span class="p">(</span><span class="kt">size_t</span> <span class="n">n</span><span class="p">)</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">n</span><span class="o">*</span><span class="n">price</span><span class="p">;}</span>
    <span class="k">virtual</span> <span class="o">~</span><span class="n">Quote</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span><span class="c1">//åŸºç±»é€šå¸¸éƒ½åº”è¯¥å®šä¹‰ä¸€ä¸ªè™šææ„å‡½æ•°</span>
<span class="nl">private:</span>
    <span class="n">string</span> <span class="n">bookNo</span><span class="p">;</span>
<span class="nl">protected:</span>
    <span class="kt">double</span> <span class="n">price</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#endif
</span></code></pre></div></div>

<p><img src="https://img-blog.csdnimg.cn/2019110714063632.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNjg1MDEy,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="mf">15.4</span><span class="p">)</span>
<span class="err">æ´¾ç”Ÿç±»çš„å£°æ˜åªéœ€è¦åŒ…å«ç±»åå³å¯ï¼Œè‹¥æƒ³å°†æŸä¸ªç±»ç”¨ä½œåŸºç±»ï¼Œåˆ™è¯¥ç±»å¿…é¡»å·²ç»å®šä¹‰</span>
<span class="n">a</span><span class="o">&gt;</span><span class="err">ä¸å¯ä»¥ç»§æ‰¿è‡ªå·±</span>
<span class="n">b</span><span class="o">&gt;</span><span class="err">æ­£ç¡®å£°æ˜ä¸”å®šä¹‰</span>
<span class="n">c</span><span class="o">&gt;</span><span class="err">ä»…å£°æ˜çš„è¯ï¼Œåªéœ€è¦ç±»åå³å¯</span>
<span class="p">(</span><span class="mf">15.5</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">Bulk_Quote</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Quote</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="n">Bulk_Quote</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span>
    <span class="n">Bulk_Quote</span><span class="p">(</span><span class="k">const</span> <span class="n">string</span><span class="o">&amp;</span> <span class="n">book</span><span class="p">,</span> <span class="kt">double</span> <span class="n">p</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">qty</span><span class="p">,</span> <span class="kt">double</span> <span class="n">disc</span><span class="p">)</span><span class="o">:</span>
                <span class="n">Quote</span><span class="p">(</span><span class="n">book</span><span class="p">,</span> <span class="n">p</span><span class="p">),</span> <span class="n">min_qty</span><span class="p">(</span><span class="n">qty</span><span class="p">),</span> <span class="n">discount</span><span class="p">(</span><span class="n">disc</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
    <span class="kt">double</span> <span class="n">net_price</span><span class="p">(</span><span class="kt">size_t</span> <span class="n">n</span><span class="p">)</span> <span class="k">const</span> <span class="k">override</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">n</span> <span class="o">&gt;=</span> <span class="n">min_qty</span><span class="p">)</span> <span class="k">return</span> <span class="n">n</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">discount</span><span class="p">)</span><span class="o">*</span><span class="n">price</span><span class="p">;</span>
        <span class="k">else</span> <span class="k">return</span> <span class="n">n</span><span class="o">*</span><span class="n">price</span><span class="p">;</span>
    <span class="p">}</span>
<span class="nl">private:</span>
    <span class="kt">size_t</span> <span class="n">min_qty</span><span class="p">;</span>
    <span class="kt">double</span> <span class="n">discount</span><span class="p">;</span>
<span class="p">};</span>
<span class="p">(</span><span class="mf">15.6</span><span class="p">)</span>
<span class="kt">void</span> <span class="nf">test6</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">Quote</span> <span class="n">q</span><span class="p">(</span><span class="s">"bcsj"</span><span class="p">,</span> <span class="mi">12</span><span class="p">);</span>
    <span class="n">Bulk_Quote</span> <span class="n">bq</span><span class="p">(</span><span class="s">"pfdsj"</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">);</span>
    <span class="c1">//ç¬¬ä¸ƒé¢˜å®šä¹‰çš„æ´¾ç”Ÿç±»</span>
    <span class="n">Bulk</span> <span class="n">b</span><span class="p">(</span><span class="s">"sgyy"</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">q</span><span class="p">.</span><span class="n">net_price</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">bq</span><span class="p">.</span><span class="n">net_price</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">bq</span><span class="p">.</span><span class="n">net_price</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">b</span><span class="p">.</span><span class="n">net_price</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">b</span><span class="p">.</span><span class="n">net_price</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">(</span><span class="mf">15.7</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">Bulk</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Quote</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="n">Bulk</span><span class="p">(</span><span class="k">const</span> <span class="n">string</span><span class="o">&amp;</span> <span class="n">book</span><span class="p">,</span> <span class="kt">double</span> <span class="n">pri</span><span class="p">,</span> <span class="kt">double</span> <span class="n">dis</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">n</span><span class="p">)</span><span class="o">:</span>
                    <span class="n">Quote</span><span class="p">(</span><span class="n">book</span><span class="p">,</span> <span class="n">pri</span><span class="p">),</span> <span class="n">discount</span><span class="p">(</span><span class="n">dis</span><span class="p">),</span> <span class="n">max_qty</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="p">{</span>
                        <span class="n">max_dis</span> <span class="o">=</span> <span class="n">n</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">dis</span><span class="p">)</span> <span class="o">*</span> <span class="n">pri</span><span class="p">;</span>
                    <span class="p">}</span>
    <span class="kt">double</span> <span class="n">net_price</span><span class="p">(</span><span class="kt">size_t</span> <span class="n">n</span><span class="p">)</span> <span class="k">const</span> <span class="k">override</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">n</span> <span class="o">&lt;=</span> <span class="n">max_qty</span><span class="p">)</span> <span class="k">return</span> <span class="n">n</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">discount</span><span class="p">)</span><span class="o">*</span><span class="n">price</span><span class="p">;</span>
        <span class="k">else</span> <span class="k">return</span> <span class="n">max_dis</span> <span class="o">+</span> <span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="n">max_qty</span><span class="p">)</span><span class="o">*</span><span class="n">price</span><span class="p">;</span>
    <span class="p">}</span>
<span class="nl">private:</span>
    <span class="kt">size_t</span> <span class="n">max_qty</span><span class="p">;</span>
    <span class="kt">double</span> <span class="n">discount</span><span class="p">;</span>
    <span class="kt">double</span> <span class="n">max_dis</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div></div>

<p><img src="https://img-blog.csdnimg.cn/20191107143224258.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNjg1MDEy,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="mf">15.8</span><span class="p">)</span>
<span class="err">é™æ€ç±»å‹ï¼Œç¼–è¯‘æ—¶æ€»æ˜¯å·²çŸ¥çš„ï¼Œå®ƒæ˜¯å˜é‡å£°æ˜æ—¶çš„ç±»å‹æˆ–è¡¨è¾¾å¼ç”Ÿæˆçš„ç±»å‹</span>
<span class="err">åŠ¨æ€ç±»å‹ï¼Œæ˜¯å˜é‡æˆ–è¡¨è¾¾å¼è¡¨ç¤ºçš„å†…å­˜ä¸­çš„å¯¹è±¡çš„ç±»å‹ï¼Œç›´åˆ°è¿è¡Œæ—¶æ‰å¯çŸ¥</span>

<span class="err">å¦‚æœè¡¨è¾¾å¼æ—¢ä¸æ˜¯å¼•ç”¨ä¹Ÿä¸æ˜¯æŒ‡é’ˆï¼Œåˆ™å®ƒçš„åŠ¨æ€ç±»å‹æ°¸è¿œä¸é™æ€ç±»å‹ä¸€è‡´ã€‚</span>
<span class="err">åŸºç±»çš„æŒ‡é’ˆæˆ–å¼•ç”¨çš„é™æ€ç±»å‹å¯èƒ½ä¸å…¶åŠ¨æ€ç±»å‹ä¸ä¸€è‡´ã€‚</span>

<span class="err">ä¸€ä¸ªåŸºç±»çš„å¯¹è±¡å¯èƒ½æ˜¯æ´¾ç”Ÿç±»å¯¹è±¡çš„ä¸€éƒ¨åˆ†ï¼Œä¹Ÿå¯èƒ½ä¸æ˜¯ï¼Œæ‰€ä»¥ä¸å­˜åœ¨ä»åŸºç±»å‘æ´¾ç”Ÿç±»çš„è‡ªåŠ¨ç±»å‹è½¬æ¢</span>
<span class="err">å¯ä»¥é€šè¿‡</span><span class="k">dynamic_cast</span> <span class="err">æˆ–</span> <span class="k">static_cast</span> <span class="err">è¿›è¡Œç±»å‹è½¬æ¢</span>
<span class="p">(</span><span class="mf">15.9</span><span class="p">)</span>
<span class="n">eg</span><span class="p">.</span>
<span class="n">Bulk_Quote</span> <span class="n">bulk</span><span class="p">;</span>
<span class="n">Quote</span> <span class="o">*</span><span class="n">itemP</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">bulk</span><span class="p">;</span> <span class="c1">//itemP åŠ¨æ€ç±»å‹æ˜¯Bulk_Quote</span>
<span class="p">(</span><span class="mf">15.10</span><span class="p">)</span>
<span class="n">ifstream</span><span class="err">ç±»å’Œ</span><span class="n">istringstream</span><span class="err">éƒ½ç»§æ‰¿è‡ª</span><span class="n">istream</span><span class="err">ç±»</span><span class="p">(</span><span class="n">cin</span><span class="p">)</span><span class="err">ã€‚</span>
<span class="n">ofstream</span><span class="err">ç±»å’Œ</span><span class="n">ostringstream</span><span class="err">éƒ½ç»§æ‰¿è‡ª</span><span class="n">ostream</span><span class="err">ç±»</span><span class="p">(</span><span class="n">cout</span><span class="p">)</span><span class="err">ã€‚</span>
<span class="n">read</span><span class="err">å‡½æ•°æ¥å—</span><span class="n">istream</span><span class="err">ç±»çš„å¼•ç”¨ï¼Œæ‰€ä»¥å‘ç”Ÿäº†æ´¾ç”Ÿç±»å‘åŸºç±»çš„ç±»å‹è½¬æ¢ã€‚</span>
</code></pre></div></div>

<p><img src="https://img-blog.csdnimg.cn/20191107150504840.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNjg1MDEy,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="mf">15.11</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">Quote</span> <span class="p">{</span>
<span class="nl">public:</span>
<span class="c1">//...</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">debug</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">bookNo</span> <span class="o">&lt;&lt;</span> <span class="s">" "</span> <span class="o">&lt;&lt;</span> <span class="n">price</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
<span class="c1">//...</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">Bulk_Quote</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Quote</span> <span class="p">{</span>
<span class="nl">public:</span>
<span class="c1">//...</span>
    <span class="kt">void</span> <span class="n">debug</span><span class="p">()</span> <span class="k">const</span> <span class="k">override</span> <span class="p">{</span>
        <span class="n">Quote</span><span class="o">::</span><span class="n">debug</span><span class="p">();</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">min_qty</span> <span class="o">&lt;&lt;</span> <span class="s">" "</span> <span class="o">&lt;&lt;</span> <span class="n">discount</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
<span class="c1">//...</span>
<span class="p">};</span>
<span class="p">(</span><span class="mf">15.12</span><span class="p">)</span>
<span class="k">override</span><span class="err">è¡¨ç¤ºæ”¹æ´¾ç”Ÿç±»çš„æ­¤å‡½æ•°ä¸ºè™šå‡½æ•°ï¼Œæ¯ä¸ªæ´¾ç”Ÿç±»éƒ½éœ€è¦å®šä¹‰</span>
<span class="k">final</span><span class="err">è¡¨ç¤ºå‡½æ•°ä¸å¯è¢«è¦†å†™ï¼Œä¸å…è®¸è¯¥ç±»çš„æ´¾ç”Ÿç±»å®šä¹‰</span>
<span class="err">å¦‚æœä¸å…è®¸è¯¥æ´¾ç”Ÿç±»çš„æ´¾ç”Ÿç±»è¦†å†™æ”¹å‡½æ•°ï¼Œåˆ™æœ‰å¿…è¦</span>
<span class="p">(</span><span class="mf">15.13</span><span class="p">)</span>
<span class="n">base</span><span class="o">::</span><span class="n">print</span><span class="p">(</span><span class="n">ostream</span><span class="o">&amp;</span> <span class="n">os</span><span class="p">)</span> <span class="err">è¾“å‡º</span><span class="n">base</span><span class="err">çš„</span><span class="n">basename</span>
<span class="n">derived</span><span class="o">::</span><span class="n">print</span><span class="p">(</span><span class="n">ostream</span><span class="o">&amp;</span> <span class="n">os</span><span class="p">)</span> <span class="err">è°ƒç”¨</span><span class="n">base</span><span class="o">::</span><span class="n">print</span><span class="err">ï¼Œç„¶åè¾“å‡º</span><span class="n">derived</span><span class="err">çš„</span><span class="n">i</span>
<span class="err">åº”è¯¥æŠŠ</span><span class="n">print</span><span class="p">(</span><span class="n">os</span><span class="p">);</span><span class="err">æ”¹æˆ</span> <span class="n">base</span><span class="o">::</span><span class="n">print</span><span class="p">(</span><span class="n">os</span><span class="p">);</span>
<span class="p">(</span><span class="mf">15.14</span><span class="p">)</span>
<span class="n">a</span><span class="o">&gt;</span> <span class="n">base</span><span class="o">::</span><span class="n">print</span>
<span class="n">b</span><span class="o">&gt;</span> <span class="n">derived</span><span class="o">::</span><span class="n">print</span>
<span class="n">c</span><span class="o">&gt;</span> <span class="n">base</span><span class="o">::</span><span class="n">name</span>
<span class="n">d</span><span class="o">&gt;</span> <span class="n">base</span><span class="o">::</span><span class="n">name</span>
<span class="n">e</span><span class="o">&gt;</span> <span class="n">base</span><span class="o">::</span><span class="n">print</span>
<span class="n">f</span><span class="o">&gt;</span> <span class="n">derived</span><span class="o">::</span><span class="n">print</span>
</code></pre></div></div>

<p><img src="https://img-blog.csdnimg.cn/20191107152324678.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="mf">15.15</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">Disc_quote</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Quote</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="n">Disc_quote</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span>
    <span class="n">Disc_quote</span><span class="p">(</span><span class="k">const</span> <span class="n">string</span><span class="o">&amp;</span> <span class="n">book</span><span class="p">,</span> <span class="kt">double</span> <span class="n">p</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">qty</span><span class="p">,</span> <span class="kt">double</span> <span class="n">disc</span><span class="p">)</span><span class="o">:</span>
                <span class="n">Quote</span><span class="p">(</span><span class="n">book</span><span class="p">,</span> <span class="n">p</span><span class="p">),</span> <span class="n">quantity</span><span class="p">(</span><span class="n">qty</span><span class="p">),</span> <span class="n">discount</span><span class="p">(</span><span class="n">disc</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
    <span class="kt">double</span> <span class="n">net_price</span><span class="p">(</span><span class="kt">size_t</span> <span class="n">n</span><span class="p">)</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kt">void</span> <span class="n">debug</span><span class="p">()</span> <span class="k">const</span> <span class="k">override</span> <span class="p">{</span>
        <span class="n">Quote</span><span class="o">::</span><span class="n">debug</span><span class="p">();</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">quantity</span> <span class="o">&lt;&lt;</span> <span class="s">" "</span> <span class="o">&lt;&lt;</span> <span class="n">discount</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
<span class="nl">protected:</span>
    <span class="kt">double</span> <span class="n">discount</span><span class="p">;</span>
    <span class="kt">size_t</span> <span class="n">quantity</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">Bulk_quote</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Disc_quote</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="n">Bulk_quote</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span>
    <span class="n">Bulk_quote</span><span class="p">(</span><span class="k">const</span> <span class="n">string</span><span class="o">&amp;</span> <span class="n">book</span><span class="p">,</span> <span class="kt">double</span> <span class="n">p</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">qty</span><span class="p">,</span> <span class="kt">double</span> <span class="n">disc</span><span class="p">)</span><span class="o">:</span>
                <span class="n">Disc_quote</span><span class="p">(</span><span class="n">book</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">qty</span><span class="p">,</span> <span class="n">disc</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
    <span class="kt">double</span> <span class="n">net_price</span><span class="p">(</span><span class="kt">size_t</span> <span class="n">n</span><span class="p">)</span> <span class="k">const</span> <span class="k">override</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">n</span> <span class="o">&lt;=</span> <span class="n">quantity</span><span class="p">)</span> <span class="k">return</span> <span class="n">n</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">discount</span><span class="p">)</span><span class="o">*</span><span class="n">price</span><span class="p">;</span>
        <span class="k">else</span> <span class="k">return</span> <span class="n">quantity</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">discount</span><span class="p">)</span><span class="o">*</span><span class="n">price</span><span class="o">+</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="n">quantity</span><span class="p">)</span><span class="o">*</span><span class="n">price</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>
<span class="p">(</span><span class="mf">15.16</span><span class="p">)</span>
<span class="kt">void</span> <span class="nf">test16</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">Bulk_quote</span> <span class="n">bq</span><span class="p">(</span><span class="s">"pfdsj"</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">);</span>
    <span class="n">Disc_quote</span><span class="o">&amp;</span> <span class="n">dp</span> <span class="o">=</span> <span class="n">bq</span><span class="p">;</span>
    <span class="n">bq</span><span class="p">.</span><span class="n">debug</span><span class="p">();</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">dp</span><span class="p">.</span><span class="n">net_price</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">dp</span><span class="p">.</span><span class="n">net_price</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="n">dp</span><span class="p">.</span><span class="n">debug</span><span class="p">();</span>
    <span class="n">Disc_quote</span> <span class="n">dq</span><span class="p">;</span><span class="c1">//17é¢˜é”™è¯¯ç¤ºèŒƒ</span>
<span class="p">}</span>

<span class="p">(</span><span class="mf">15.17</span><span class="p">)</span>
<span class="n">cannot</span> <span class="n">declare</span> <span class="n">variable</span> <span class="err">â€˜</span><span class="n">dq</span><span class="err">â€™</span> <span class="n">to</span> <span class="n">be</span> <span class="n">of</span> <span class="n">abstract</span> <span class="n">type</span> <span class="err">â€˜</span><span class="n">Disc_quote</span><span class="err">â€™</span>
</code></pre></div></div>

<p><img src="https://img-blog.csdnimg.cn/20191107161056663.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNjg1MDEy,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="mf">15.18</span><span class="p">)</span>
<span class="err">åªæœ‰å…¬æœ‰åœ°ç»§æ‰¿ï¼Œç”¨æˆ·ä»£ç æ‰èƒ½ä½¿ç”¨æ´¾ç”Ÿç±»å‘åŸºç±»çš„è½¬æ¢ã€‚</span>
<span class="n">Base</span> <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">d1</span><span class="p">;</span>  <span class="c1">//åˆæ³•</span>
<span class="n">p</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">d2</span><span class="p">;</span>    <span class="c1">//ä¸åˆæ³•</span>
<span class="n">p</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">d3</span><span class="p">;</span>    <span class="c1">//ä¸åˆæ³•</span>
<span class="n">p</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">dd1</span><span class="p">;</span>   <span class="c1">//åˆæ³•</span>
<span class="n">p</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">dd2</span><span class="p">;</span>   <span class="c1">//ä¸åˆæ³•</span>
<span class="n">p</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">dd3</span><span class="p">;</span>   <span class="c1">//ä¸åˆæ³•</span>
<span class="p">(</span><span class="mf">15.19</span><span class="p">)</span>
<span class="err">ä¸è®ºä»€ä¹ˆæ–¹å¼ç»§æ‰¿ï¼Œæ´¾ç”Ÿç±»çš„æˆå‘˜å‡½æ•°å’Œå‹å…ƒéƒ½èƒ½ä½¿ç”¨æ´¾ç”Ÿç±»å‘åŸºç±»çš„è½¬æ¢ã€‚</span>
<span class="err">å¦‚æœ</span><span class="n">D</span><span class="err">ç»§æ‰¿</span><span class="n">B</span><span class="err">çš„æ–¹å¼æ˜¯ç§æœ‰çš„ï¼Œåˆ™</span><span class="n">D</span><span class="err">çš„æ´¾ç”Ÿç±»çš„æˆå‘˜å’Œå‹å…ƒä¸èƒ½ä½¿ç”¨ç±»å‹è½¬æ¢ã€‚</span>
<span class="err">æ‰€ä»¥é™¤äº†ç±»</span><span class="n">Derived_from_Private</span><span class="err">ä¸åˆæ³•å¤–ï¼Œå…¶ä»–éƒ½åˆæ³•</span>
<span class="p">(</span><span class="mf">15.20</span><span class="p">)</span>
<span class="cp">#include &lt;iostream&gt;
</span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">base</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="kt">int</span> <span class="n">pub</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="nl">protected:</span>
    <span class="kt">int</span> <span class="n">prot</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="nl">private:</span>
    <span class="kt">int</span> <span class="n">priv</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">pub_derv</span> <span class="o">:</span> <span class="k">public</span> <span class="n">base</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="kt">void</span> <span class="n">memfcn</span><span class="p">(</span><span class="n">base</span> <span class="o">&amp;</span><span class="n">b</span><span class="p">)</span> <span class="p">{</span><span class="n">b</span> <span class="o">=</span> <span class="o">*</span><span class="k">this</span><span class="p">;}</span>
    <span class="kt">int</span> <span class="n">pubd</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"pub_derv pub: "</span> <span class="o">&lt;&lt;</span> <span class="n">pub</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kt">void</span> <span class="n">protd</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"pub_derv prot: "</span> <span class="o">&lt;&lt;</span> <span class="n">prot</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kt">void</span> <span class="n">privd</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">//cout &lt;&lt; "pub_derv priv: " &lt;&lt; priv &lt;&lt; endl;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">prot_derv</span> <span class="o">:</span> <span class="k">protected</span> <span class="n">base</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="kt">void</span> <span class="n">memfcn</span><span class="p">(</span><span class="n">base</span> <span class="o">&amp;</span><span class="n">b</span><span class="p">)</span> <span class="p">{</span><span class="n">b</span> <span class="o">=</span> <span class="o">*</span><span class="k">this</span><span class="p">;}</span>
    <span class="kt">void</span> <span class="n">pubd</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"prot_derv pub: "</span> <span class="o">&lt;&lt;</span> <span class="n">pub</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kt">void</span> <span class="n">protd</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"prot_derv prot: "</span> <span class="o">&lt;&lt;</span> <span class="n">prot</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kt">void</span> <span class="n">privd</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">//cout &lt;&lt; "prot_derv priv: " &lt;&lt; priv &lt;&lt; endl;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">priv_derv</span> <span class="o">:</span> <span class="k">private</span> <span class="n">base</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="kt">void</span> <span class="n">memfcn</span><span class="p">(</span><span class="n">base</span> <span class="o">&amp;</span><span class="n">b</span><span class="p">)</span> <span class="p">{</span><span class="n">b</span> <span class="o">=</span> <span class="o">*</span><span class="k">this</span><span class="p">;}</span>
    <span class="kt">void</span> <span class="n">pubd</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"priv_derv pub: "</span> <span class="o">&lt;&lt;</span> <span class="n">pub</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kt">void</span> <span class="n">protd</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"priv_derv prot: "</span> <span class="o">&lt;&lt;</span> <span class="n">prot</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kt">void</span> <span class="n">privd</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">//cout &lt;&lt; "priv_derv priv: " &lt;&lt; priv &lt;&lt; endl;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">pub_pub_derv</span> <span class="o">:</span> <span class="k">public</span> <span class="n">pub_derv</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="kt">void</span> <span class="n">memfcn</span><span class="p">(</span><span class="n">base</span> <span class="o">&amp;</span><span class="n">b</span><span class="p">)</span> <span class="p">{</span><span class="n">b</span> <span class="o">=</span> <span class="o">*</span><span class="k">this</span><span class="p">;}</span>
    <span class="kt">void</span> <span class="n">pub_pub</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"pub_pub_derv pub: "</span> <span class="o">&lt;&lt;</span> <span class="n">pub</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kt">void</span> <span class="n">pub_prot</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"pub_pub_derv prot: "</span> <span class="o">&lt;&lt;</span> <span class="n">prot</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kt">void</span> <span class="n">pub_priv</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">//cout &lt;&lt; "pub_pub_derv priv: " &lt;&lt; priv &lt;&lt; endl;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">pub_prot_derv</span> <span class="o">:</span> <span class="k">public</span> <span class="n">prot_derv</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="kt">void</span> <span class="n">memfcn</span><span class="p">(</span><span class="n">base</span> <span class="o">&amp;</span><span class="n">b</span><span class="p">)</span> <span class="p">{</span><span class="n">b</span> <span class="o">=</span> <span class="o">*</span><span class="k">this</span><span class="p">;}</span>
    <span class="kt">void</span> <span class="n">pub_pub</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"pub_prot_derv pub: "</span> <span class="o">&lt;&lt;</span> <span class="n">pub</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kt">void</span> <span class="n">pub_prot</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"pub_prot_derv prot: "</span> <span class="o">&lt;&lt;</span> <span class="n">prot</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kt">void</span> <span class="n">pub_priv</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">//cout &lt;&lt; "pub_prot_derv priv: " &lt;&lt; priv &lt;&lt; endl;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">pub_priv_derv</span> <span class="o">:</span> <span class="k">public</span> <span class="n">priv_derv</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="kt">void</span> <span class="n">memfcn</span><span class="p">(</span><span class="n">base</span> <span class="o">&amp;</span><span class="n">b</span><span class="p">)</span> <span class="p">{</span><span class="n">b</span> <span class="o">=</span> <span class="o">*</span><span class="k">this</span><span class="p">;}</span>
    <span class="kt">void</span> <span class="n">pub_pub</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">//cout &lt;&lt; "pub_prot_derv pub: " &lt;&lt; pub &lt;&lt; endl;</span>
    <span class="p">}</span>
    <span class="kt">void</span> <span class="n">pub_prot</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">//cout &lt;&lt; "pub_prot_derv prot: " &lt;&lt; prot &lt;&lt; endl;</span>
    <span class="p">}</span>
    <span class="kt">void</span> <span class="n">pub_priv</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">//cout &lt;&lt; "pub_prot_derv priv: " &lt;&lt; priv &lt;&lt; endl;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="kt">void</span> <span class="nf">test20</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">pub_derv</span> <span class="n">d1</span><span class="p">;</span>
    <span class="n">priv_derv</span> <span class="n">d2</span><span class="p">;</span>
    <span class="n">prot_derv</span> <span class="n">d3</span><span class="p">;</span>
    <span class="n">pub_pub_derv</span> <span class="n">dd1</span><span class="p">;</span>
    <span class="n">pub_priv_derv</span> <span class="n">dd2</span><span class="p">;</span>
    <span class="n">pub_prot_derv</span> <span class="n">dd3</span><span class="p">;</span>
    <span class="n">base</span> <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">d1</span><span class="p">;</span>
    <span class="n">p</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">d2</span><span class="p">;</span>
    <span class="n">p</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">d3</span><span class="p">;</span>
    <span class="n">p</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">dd1</span><span class="p">;</span>
    <span class="n">p</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">dd2</span><span class="p">;</span>
    <span class="n">p</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">dd3</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">test20</span><span class="p">();</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
<span class="mi">18</span><span class="o">:</span>
<span class="n">inherit</span><span class="p">.</span><span class="n">cpp</span><span class="o">:</span><span class="mi">100</span><span class="o">:</span><span class="mi">7</span><span class="o">:</span> <span class="n">error</span><span class="o">:</span> <span class="err">â€˜</span><span class="n">base</span><span class="err">â€™</span> <span class="n">is</span> <span class="n">an</span> <span class="n">inaccessible</span> <span class="n">base</span> <span class="n">of</span> <span class="err">â€˜</span><span class="n">priv_derv</span><span class="err">â€™</span>
<span class="n">p</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">d2</span><span class="p">;</span>
  <span class="o">^</span>
<span class="n">inherit</span><span class="p">.</span><span class="n">cpp</span><span class="o">:</span><span class="mi">101</span><span class="o">:</span><span class="mi">7</span><span class="o">:</span> <span class="n">error</span><span class="o">:</span> <span class="err">â€˜</span><span class="n">base</span><span class="err">â€™</span> <span class="n">is</span> <span class="n">an</span> <span class="n">inaccessible</span> <span class="n">base</span> <span class="n">of</span> <span class="err">â€˜</span><span class="n">prot_derv</span><span class="err">â€™</span>
<span class="n">p</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">d3</span><span class="p">;</span>
  <span class="o">^</span>
<span class="n">inherit</span><span class="p">.</span><span class="n">cpp</span><span class="o">:</span><span class="mi">103</span><span class="o">:</span><span class="mi">7</span><span class="o">:</span> <span class="n">error</span><span class="o">:</span> <span class="err">â€˜</span><span class="n">base</span><span class="err">â€™</span> <span class="n">is</span> <span class="n">an</span> <span class="n">inaccessible</span> <span class="n">base</span> <span class="n">of</span> <span class="err">â€˜</span><span class="n">pub_priv_derv</span><span class="err">â€™</span>
<span class="n">p</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">dd2</span><span class="p">;</span>
  <span class="o">^</span>
<span class="n">inherit</span><span class="p">.</span><span class="n">cpp</span><span class="o">:</span><span class="mi">104</span><span class="o">:</span><span class="mi">7</span><span class="o">:</span> <span class="n">error</span><span class="o">:</span> <span class="err">â€˜</span><span class="n">base</span><span class="err">â€™</span> <span class="n">is</span> <span class="n">an</span> <span class="n">inaccessible</span> <span class="n">base</span> <span class="n">of</span> <span class="err">â€˜</span><span class="n">pub_prot_derv</span><span class="err">â€™</span>
<span class="n">p</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">dd3</span><span class="p">;</span>
  <span class="o">^</span>
<span class="mi">19</span><span class="o">:</span>
<span class="n">inherit</span><span class="p">.</span><span class="n">cpp</span><span class="o">:</span><span class="mi">86</span><span class="o">:</span><span class="mi">17</span><span class="o">:</span> <span class="n">error</span><span class="o">:</span> <span class="n">within</span> <span class="k">this</span> <span class="n">context</span>
<span class="kt">void</span> <span class="nf">memfcn</span><span class="p">(</span><span class="n">base</span> <span class="o">&amp;</span><span class="n">b</span><span class="p">)</span> <span class="p">{</span><span class="n">b</span> <span class="o">=</span> <span class="o">*</span><span class="k">this</span><span class="p">;}</span>
            <span class="o">^</span>
<span class="n">inherit</span><span class="p">.</span><span class="n">cpp</span><span class="o">:</span> <span class="n">In</span> <span class="n">member</span> <span class="n">function</span> <span class="err">â€˜</span><span class="kt">void</span> <span class="n">pub_priv_derv</span><span class="o">::</span><span class="n">memfcn</span><span class="p">(</span><span class="n">base</span><span class="o">&amp;</span><span class="p">)</span><span class="err">â€™</span><span class="o">:</span>
<span class="n">inherit</span><span class="p">.</span><span class="n">cpp</span><span class="o">:</span><span class="mi">86</span><span class="o">:</span><span class="mi">29</span><span class="o">:</span> <span class="n">error</span><span class="o">:</span> <span class="err">â€˜</span><span class="n">base</span><span class="err">â€™</span> <span class="n">is</span> <span class="n">an</span> <span class="n">inaccessible</span> <span class="n">base</span> <span class="n">of</span> <span class="err">â€˜</span><span class="n">pub_priv_derv</span><span class="err">â€™</span>
<span class="kt">void</span> <span class="nf">memfcn</span><span class="p">(</span><span class="n">base</span> <span class="o">&amp;</span><span class="n">b</span><span class="p">)</span> <span class="p">{</span><span class="n">b</span> <span class="o">=</span> <span class="o">*</span><span class="k">this</span><span class="p">;}</span>
                        <span class="o">^</span>
<span class="p">(</span><span class="mf">15.21</span><span class="p">)</span>
<span class="err">è§</span><span class="mi">21</span>
<span class="p">(</span><span class="mf">15.22</span><span class="p">)</span>
<span class="cp">#include &lt;iostream&gt;
#include &lt;string&gt;
</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Animals</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="n">Animals</span><span class="p">(</span><span class="n">string</span> <span class="n">n</span><span class="p">)</span><span class="o">:</span> <span class="n">name</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">speak</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="nl">protected:</span>
    <span class="n">string</span> <span class="n">name</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">Dog</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Animals</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="n">Dog</span><span class="p">(</span><span class="n">string</span> <span class="n">s</span><span class="p">)</span><span class="o">:</span> <span class="n">Animals</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
    <span class="kt">void</span> <span class="n">speak</span><span class="p">()</span> <span class="k">override</span> <span class="p">{</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"I'm "</span> <span class="o">&lt;&lt;</span> <span class="n">name</span> <span class="o">&lt;&lt;</span> <span class="s">", and wang wang wang..."</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">Cat</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Animals</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="n">Cat</span><span class="p">(</span><span class="n">string</span> <span class="n">s</span><span class="p">)</span><span class="o">:</span> <span class="n">Animals</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
    <span class="kt">void</span> <span class="n">speak</span><span class="p">()</span> <span class="k">override</span> <span class="p">{</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"I'm "</span> <span class="o">&lt;&lt;</span> <span class="n">name</span> <span class="o">&lt;&lt;</span> <span class="s">", and miao miao miao..."</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">Dog</span> <span class="n">d</span><span class="p">(</span><span class="s">"xiaohei"</span><span class="p">);</span>
    <span class="n">Cat</span> <span class="n">c</span><span class="p">(</span><span class="s">"tom"</span><span class="p">);</span>
    <span class="n">Animals</span><span class="o">*</span> <span class="n">a</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">d</span><span class="p">;</span>
    <span class="n">a</span><span class="o">-&gt;</span><span class="n">speak</span><span class="p">();</span>
    <span class="n">a</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">c</span><span class="p">;</span>
    <span class="n">a</span><span class="o">-&gt;</span><span class="n">speak</span><span class="p">();</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div></div>

<p><img src="https://img-blog.csdnimg.cn/20191107162717535.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="mf">15.23</span><span class="p">)</span>
<span class="err">è™šå‡½æ•°å°†åœ¨è¿è¡Œæ—¶ç¡®å®šä½¿ç”¨è™šå‡½æ•°çš„å“ªä¸ªç‰ˆæœ¬ï¼Œåˆ¤æ–­çš„ä¾æ®æ˜¯è¯¥æŒ‡é’ˆæ‰€ç»‘å®šå¯¹è±¡çš„çœŸå®ç±»å‹ã€‚</span>
<span class="err">éè™šå‡½æ•°ä¸ä¼šå‘ç”ŸåŠ¨æ€ç»‘å®šï¼Œå®é™…è°ƒç”¨çš„å‡½æ•°ç‰ˆæœ¬ç”±æŒ‡é’ˆçš„é™æ€ç±»å‹å†³å®šã€‚</span>
<span class="kt">int</span> <span class="nf">fcn</span><span class="p">()</span> <span class="k">override</span> <span class="p">{</span> <span class="p">}</span>
<span class="n">bp2</span><span class="o">-&gt;</span><span class="n">fcn</span><span class="p">();</span><span class="err">å°†è°ƒç”¨</span><span class="n">D1</span><span class="o">::</span><span class="n">fcn</span><span class="p">()</span>
</code></pre></div></div>

<p><img src="https://img-blog.csdnimg.cn/20191107164807356.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="mf">15.24</span><span class="p">)</span>
<span class="err">å¦‚æœåŸºç±»çš„ææ„å‡½æ•°ä¸æ˜¯è™šå‡½æ•°ï¼Œåˆ™</span><span class="k">delete</span><span class="err">ä¸€ä¸ªæŒ‡å‘æ´¾ç”Ÿç±»å¯¹è±¡çš„åŸºç±»æŒ‡é’ˆåˆ™åªä¼šè°ƒç”¨åŸºç±»çš„ææ„å‡½æ•°</span>
<span class="err">å¦‚æœåŸºç±»çš„ææ„å‡½æ•°æ˜¯è™šå‡½æ•°ï¼Œåˆ™ä¼šå…ˆè°ƒç”¨æ´¾ç”Ÿç±»çš„ææ„å‡½æ•°ç„¶åè°ƒç”¨åŸºç±»çš„ææ„å‡½æ•°</span>
</code></pre></div></div>

<p><img src="https://img-blog.csdnimg.cn/20191107165512890.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="mf">15.25</span><span class="p">)</span>
<span class="err">åˆæˆçš„</span><span class="n">Bulk_quote</span><span class="err">é»˜è®¤æ„é€ å‡½æ•°è¿è¡Œ</span><span class="n">Disc_quote</span><span class="err">çš„é»˜è®¤æ„é€ å‡½æ•°ï¼Œåè€…åˆè¿è¡Œ</span><span class="n">Quote</span><span class="err">çš„é»˜è®¤æ„é€ å‡½æ•°</span>
<span class="n">Quote</span><span class="err">çš„æ„é€ å‡½æ•°å®Œæˆåï¼Œç»§ç»­æ‰§è¡Œ</span><span class="n">Disc_quote</span><span class="err">çš„æ„é€ å‡½æ•°ï¼Œç„¶åæ‰§è¡Œ</span><span class="n">Bulk_quote</span><span class="err">çš„æ„é€ å‡½æ•°</span>
<span class="err">å¦‚æœå»æ‰</span><span class="n">Disc_quote</span><span class="err">çš„æ„é€ å‡½æ•°ï¼Œåˆ™æ— æ³•å¯¹</span><span class="n">Bulk_quote</span><span class="err">è¿›è¡Œé»˜è®¤åˆå§‹åŒ–</span>
</code></pre></div></div>

<p><img src="https://img-blog.csdnimg.cn/20191107170134366.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include &lt;iostream&gt;
#include &lt;string&gt;
</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Quote</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="n">Quote</span><span class="p">()</span> <span class="p">{</span> <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Quote()</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span> <span class="p">}</span>
    <span class="n">Quote</span><span class="p">(</span><span class="n">string</span> <span class="n">s</span><span class="p">,</span> <span class="kt">double</span> <span class="n">p</span><span class="p">)</span><span class="o">:</span> <span class="n">bookNo</span><span class="p">(</span><span class="n">s</span><span class="p">),</span> <span class="n">price</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="p">{</span> <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Quote(string, double)</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span> <span class="p">}</span>
    <span class="c1">//copy construtor</span>
    <span class="n">Quote</span><span class="p">(</span><span class="k">const</span> <span class="n">Quote</span><span class="o">&amp;</span> <span class="n">q</span><span class="p">)</span><span class="o">:</span> <span class="n">bookNo</span><span class="p">(</span><span class="n">q</span><span class="p">.</span><span class="n">bookNo</span><span class="p">),</span> <span class="n">price</span><span class="p">(</span><span class="n">q</span><span class="p">.</span><span class="n">price</span><span class="p">)</span> <span class="p">{</span> <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Quote(const Quote&amp;)</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span> <span class="p">}</span>
    <span class="c1">//move construtor</span>
    <span class="n">Quote</span><span class="p">(</span><span class="n">Quote</span><span class="o">&amp;&amp;</span> <span class="n">q</span><span class="p">)</span> <span class="k">noexcept</span><span class="o">:</span> <span class="n">bookNo</span><span class="p">(</span><span class="n">move</span><span class="p">(</span><span class="n">q</span><span class="p">.</span><span class="n">bookNo</span><span class="p">)),</span> <span class="n">price</span><span class="p">(</span><span class="n">move</span><span class="p">(</span><span class="n">q</span><span class="p">.</span><span class="n">price</span><span class="p">))</span> 
        <span class="p">{</span> <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Quote(Quote&amp;&amp;)</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span> <span class="p">}</span>
    <span class="c1">//copy =</span>
    <span class="n">Quote</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="k">const</span> <span class="n">Quote</span><span class="o">&amp;</span> <span class="n">q</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">bookNo</span> <span class="o">=</span> <span class="n">q</span><span class="p">.</span><span class="n">bookNo</span><span class="p">;</span>
        <span class="n">price</span> <span class="o">=</span> <span class="n">q</span><span class="p">.</span><span class="n">price</span><span class="p">;</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Quote operator=(const Quote&amp;)</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
        <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">//move =</span>
    <span class="n">Quote</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="n">Quote</span><span class="o">&amp;&amp;</span> <span class="n">q</span><span class="p">)</span> <span class="k">noexcept</span> <span class="p">{</span>
        <span class="n">bookNo</span> <span class="o">=</span> <span class="n">move</span><span class="p">(</span><span class="n">q</span><span class="p">.</span><span class="n">bookNo</span><span class="p">);</span>
        <span class="n">price</span> <span class="o">=</span> <span class="n">move</span><span class="p">(</span><span class="n">q</span><span class="p">.</span><span class="n">price</span><span class="p">);</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Quote operator=(Quote&amp;&amp;)</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
        <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">//destructor</span>
    <span class="k">virtual</span> <span class="o">~</span><span class="n">Quote</span><span class="p">()</span> <span class="p">{</span> <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"~Quote()</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span> <span class="p">}</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">show</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">bookNo</span> <span class="o">&lt;&lt;</span> <span class="s">" "</span> <span class="o">&lt;&lt;</span> <span class="n">price</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span> <span class="p">}</span>
<span class="nl">private:</span>
    <span class="n">string</span> <span class="n">bookNo</span><span class="p">;</span>
<span class="nl">protected:</span>
    <span class="kt">double</span> <span class="n">price</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">Disc_quote</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Quote</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="n">Disc_quote</span><span class="p">()</span> <span class="p">{</span> <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Disc_quote()</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span> <span class="p">}</span>
    <span class="n">Disc_quote</span><span class="p">(</span><span class="n">string</span> <span class="n">s</span><span class="p">,</span> <span class="kt">double</span> <span class="n">p</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">n</span><span class="p">,</span> <span class="kt">double</span> <span class="n">d</span><span class="p">)</span><span class="o">:</span> <span class="n">Quote</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">),</span> <span class="n">quantity</span><span class="p">(</span><span class="n">n</span><span class="p">),</span> <span class="n">discount</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
        <span class="p">{</span> <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Disc_quote(string, double, size_t, double)</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span> <span class="p">}</span>
    <span class="c1">//copy construtor</span>
    <span class="n">Disc_quote</span><span class="p">(</span><span class="k">const</span> <span class="n">Disc_quote</span><span class="o">&amp;</span> <span class="n">q</span><span class="p">)</span><span class="o">:</span><span class="n">Quote</span><span class="p">(</span><span class="n">q</span><span class="p">),</span> <span class="n">quantity</span><span class="p">(</span><span class="n">q</span><span class="p">.</span><span class="n">quantity</span><span class="p">),</span> <span class="n">discount</span><span class="p">(</span><span class="n">q</span><span class="p">.</span><span class="n">discount</span><span class="p">)</span>
        <span class="p">{</span> <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Disc_quote(const Disc_quote&amp;)</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span> <span class="p">}</span>
    <span class="c1">//move construtor</span>
    <span class="n">Disc_quote</span><span class="p">(</span><span class="n">Disc_quote</span><span class="o">&amp;&amp;</span> <span class="n">q</span><span class="p">)</span> <span class="k">noexcept</span><span class="o">:</span><span class="n">Quote</span><span class="p">(</span><span class="n">move</span><span class="p">(</span><span class="n">q</span><span class="p">)),</span> <span class="n">quantity</span><span class="p">(</span><span class="n">move</span><span class="p">(</span><span class="n">q</span><span class="p">.</span><span class="n">quantity</span><span class="p">)),</span> <span class="n">discount</span><span class="p">(</span><span class="n">move</span><span class="p">(</span><span class="n">q</span><span class="p">.</span><span class="n">discount</span><span class="p">))</span>
        <span class="p">{</span> <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Disc_quote(Disc_quote&amp;&amp;)</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span> <span class="p">}</span>
    <span class="c1">//copy =</span>
    <span class="n">Disc_quote</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="k">const</span> <span class="n">Disc_quote</span><span class="o">&amp;</span> <span class="n">q</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">Quote</span><span class="o">::</span><span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="n">q</span><span class="p">);</span>
        <span class="n">quantity</span> <span class="o">=</span> <span class="n">q</span><span class="p">.</span><span class="n">quantity</span><span class="p">;</span>
        <span class="n">discount</span> <span class="o">=</span> <span class="n">q</span><span class="p">.</span><span class="n">discount</span><span class="p">;</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Disc_quote operator=(const Disc_quote&amp;)</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
        <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">//move =</span>
    <span class="n">Disc_quote</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="n">Disc_quote</span><span class="o">&amp;&amp;</span> <span class="n">q</span><span class="p">)</span> <span class="k">noexcept</span> <span class="p">{</span>
        <span class="n">Quote</span><span class="o">::</span><span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="n">move</span><span class="p">(</span><span class="n">q</span><span class="p">));</span>
        <span class="n">quantity</span> <span class="o">=</span> <span class="n">move</span><span class="p">(</span><span class="n">q</span><span class="p">.</span><span class="n">quantity</span><span class="p">);</span>
        <span class="n">discount</span> <span class="o">=</span> <span class="n">move</span><span class="p">(</span><span class="n">q</span><span class="p">.</span><span class="n">discount</span><span class="p">);</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Disc_quote operator=(Disc_quote&amp;&amp;)</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
        <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">//destructor</span>
    <span class="o">~</span><span class="n">Disc_quote</span><span class="p">()</span> <span class="k">override</span> <span class="p">{</span> <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"~Disc_quote()</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span> <span class="p">}</span>
<span class="nl">protected:</span>
    <span class="kt">size_t</span> <span class="n">quantity</span><span class="p">;</span>
    <span class="kt">double</span> <span class="n">discount</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">Bulk_quote</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Disc_quote</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="n">Bulk_quote</span><span class="p">()</span> <span class="p">{</span> <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Bulk_quote()</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span> <span class="p">}</span>
    <span class="n">Bulk_quote</span><span class="p">(</span><span class="n">string</span> <span class="n">s</span><span class="p">,</span> <span class="kt">double</span> <span class="n">p</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">n</span><span class="p">,</span> <span class="kt">double</span> <span class="n">d</span><span class="p">)</span><span class="o">:</span> <span class="n">Disc_quote</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">d</span><span class="p">)</span>
        <span class="p">{</span> <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Bulk_quote(string, double, size_t, double)</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span> <span class="p">}</span>
    <span class="c1">//copy construtor</span>
    <span class="n">Bulk_quote</span><span class="p">(</span><span class="k">const</span> <span class="n">Bulk_quote</span><span class="o">&amp;</span> <span class="n">q</span><span class="p">)</span><span class="o">:</span> <span class="n">Disc_quote</span><span class="p">(</span><span class="n">q</span><span class="p">)</span>
        <span class="p">{</span> <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Bulk_quote(const Bulk_quote&amp;)</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span> <span class="p">}</span>
    <span class="c1">//move construtor</span>
    <span class="n">Bulk_quote</span><span class="p">(</span><span class="n">Bulk_quote</span><span class="o">&amp;&amp;</span> <span class="n">q</span><span class="p">)</span> <span class="k">noexcept</span><span class="o">:</span> <span class="n">Disc_quote</span><span class="p">(</span><span class="n">move</span><span class="p">(</span><span class="n">q</span><span class="p">))</span>
        <span class="p">{</span> <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Bulk_quote(Bulk_quote&amp;&amp;)</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span> <span class="p">}</span>
    <span class="c1">//copy =</span>
    <span class="n">Bulk_quote</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="k">const</span> <span class="n">Bulk_quote</span><span class="o">&amp;</span> <span class="n">q</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">Disc_quote</span><span class="o">::</span><span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="n">q</span><span class="p">);</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Bulk_quote operator=(const Bulk_quote&amp;)</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
        <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">//move =</span>
    <span class="n">Bulk_quote</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="n">Bulk_quote</span><span class="o">&amp;&amp;</span> <span class="n">q</span><span class="p">)</span> <span class="k">noexcept</span> <span class="p">{</span>
        <span class="n">Disc_quote</span><span class="o">::</span><span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="n">move</span><span class="p">(</span><span class="n">q</span><span class="p">));</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Bulk_quote operator=(Bulk_quote&amp;&amp;)</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
        <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">//destructor</span>
    <span class="o">~</span><span class="n">Bulk_quote</span><span class="p">()</span> <span class="k">override</span> <span class="p">{</span> <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"~Bulk_quote()</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span> <span class="p">}</span>
<span class="p">};</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"=========1========</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
    <span class="n">Bulk_quote</span> <span class="n">bq1</span><span class="p">;</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"=========2========</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
    <span class="n">Bulk_quote</span> <span class="n">bq2</span><span class="p">(</span><span class="s">"tlbb"</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"=========3========</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
    <span class="n">bq1</span> <span class="o">=</span> <span class="n">move</span><span class="p">(</span><span class="n">bq2</span><span class="p">);</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"=========4========</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
    <span class="n">bq2</span><span class="p">.</span><span class="n">show</span><span class="p">();</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"=========5========</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p><img src="https://img-blog.csdnimg.cn/20191107170438662.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="mf">15.27</span><span class="p">)</span>
<span class="k">using</span> <span class="n">Disc_quote</span><span class="o">::</span><span class="n">Disc_quote</span><span class="p">;</span>
</code></pre></div></div>

<p><img src="https://img-blog.csdnimg.cn/20191107171301801.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">test28</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="n">Quote</span><span class="o">&gt;</span> <span class="n">basket</span><span class="p">;</span>
    <span class="n">basket</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">Quote</span><span class="p">(</span><span class="s">"tlbb"</span><span class="p">,</span> <span class="mi">20</span><span class="p">));</span>
    <span class="n">basket</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">Bulk_quote</span><span class="p">(</span><span class="s">"sdxn"</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">));</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">basket</span><span class="p">.</span><span class="n">back</span><span class="p">().</span><span class="n">net_price</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">test29</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">Quote</span><span class="o">&gt;&gt;</span> <span class="n">basket</span><span class="p">;</span>
    <span class="n">basket</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">Quote</span><span class="o">&gt;</span><span class="p">(</span><span class="s">"tlbb"</span><span class="p">,</span> <span class="mi">20</span><span class="p">));</span>
    <span class="n">basket</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">Bulk_quote</span><span class="o">&gt;</span><span class="p">(</span><span class="s">"sdxn"</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">));</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">basket</span><span class="p">.</span><span class="n">back</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">net_price</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p><img src="https://img-blog.csdnimg.cn/20191107171921622.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Basket</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="kt">void</span> <span class="n">add_item</span><span class="p">(</span><span class="k">const</span> <span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">Quote</span><span class="o">&gt;&amp;</span> <span class="n">sale</span><span class="p">)</span> <span class="p">{</span> <span class="n">items</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">sale</span><span class="p">);</span> <span class="p">}</span>
    <span class="kt">double</span> <span class="n">total_receipt</span><span class="p">(</span><span class="n">ostream</span><span class="o">&amp;</span> <span class="n">os</span><span class="p">)</span> <span class="k">const</span> <span class="p">{</span>
        <span class="kt">double</span> <span class="n">sum</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="k">auto</span> <span class="n">iter</span> <span class="o">:</span> <span class="n">items</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">iter</span><span class="o">-&gt;</span><span class="n">show</span><span class="p">();</span>
            <span class="n">sum</span> <span class="o">+=</span> <span class="n">iter</span><span class="o">-&gt;</span><span class="n">net_price</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="n">os</span> <span class="o">&lt;&lt;</span> <span class="s">"sum: "</span> <span class="o">&lt;&lt;</span> <span class="n">sum</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
        <span class="k">return</span> <span class="n">sum</span><span class="p">;</span>
    <span class="p">}</span>
<span class="nl">private:</span>
    <span class="k">static</span> <span class="kt">bool</span> <span class="n">compare</span><span class="p">(</span><span class="k">const</span> <span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">Quote</span><span class="o">&gt;&amp;</span> <span class="n">lhs</span><span class="p">,</span> <span class="k">const</span> <span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">Quote</span><span class="o">&gt;&amp;</span> <span class="n">rhs</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">lhs</span><span class="o">-&gt;</span><span class="n">isbn</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">rhs</span><span class="o">-&gt;</span><span class="n">isbn</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="n">multiset</span><span class="o">&lt;</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">Quote</span><span class="o">&gt;</span><span class="p">,</span> <span class="k">decltype</span><span class="p">(</span><span class="n">compare</span><span class="p">)</span><span class="o">*&gt;</span> <span class="n">items</span><span class="p">{</span><span class="n">compare</span><span class="p">};</span>
<span class="p">};</span>
<span class="kt">void</span> <span class="nf">test30</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">Basket</span> <span class="n">b</span><span class="p">;</span>
    <span class="n">b</span><span class="p">.</span><span class="n">add_item</span><span class="p">(</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">Quote</span><span class="o">&gt;</span><span class="p">(</span><span class="s">"tlbb"</span><span class="p">,</span> <span class="mi">20</span><span class="p">));</span>
    <span class="n">b</span><span class="p">.</span><span class="n">add_item</span><span class="p">(</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">Bulk_quote</span><span class="o">&gt;</span><span class="p">(</span><span class="s">"sdxn"</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">));</span>
    <span class="n">b</span><span class="p">.</span><span class="n">total_receipt</span><span class="p">(</span><span class="n">cout</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p><img src="https://img-blog.csdnimg.cn/20191107172458739.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="mf">15.31</span><span class="p">)</span>
<span class="n">a</span><span class="o">&gt;</span> <span class="n">WordQuery</span><span class="o">*</span><span class="mi">3</span><span class="p">,</span> <span class="n">OrQuery</span><span class="o">*</span><span class="mi">1</span><span class="p">,</span> <span class="n">AndQuery</span><span class="o">*</span><span class="mi">1</span><span class="p">,</span> <span class="n">NotQuery</span><span class="o">*</span><span class="mi">1</span>
<span class="n">b</span><span class="o">&gt;</span> <span class="n">WordQuery</span><span class="o">*</span><span class="mi">3</span><span class="p">,</span> <span class="n">OrQuery</span><span class="o">*</span><span class="mi">1</span><span class="p">,</span> <span class="n">AndQuery</span><span class="o">*</span><span class="mi">1</span><span class="p">,</span> <span class="n">NotQuery</span><span class="o">*</span><span class="mi">1</span>
<span class="n">c</span><span class="o">&gt;</span> <span class="n">WordQuery</span><span class="o">*</span><span class="mi">4</span><span class="p">,</span> <span class="n">AndQuery</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span> <span class="n">OrQuery</span><span class="o">*</span><span class="mi">1</span>
</code></pre></div></div>

<p><img src="https://img-blog.csdnimg.cn/20191107173814511.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="mf">15.32</span><span class="p">)</span>
<span class="err">æ‹·è´</span><span class="o">:</span>
<span class="err">è°ƒç”¨åˆæˆçš„æ‹·è´æ„é€ å‡½æ•°ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œæ•°æ®æˆå‘˜æ˜¯ä¸€ä¸ªå…±äº«æŒ‡é’ˆï¼Œæ‰€ä»¥åœ¨æ‹·è´æ—¶ï¼Œå…±äº«æŒ‡é’ˆæŒ‡å‘ç›¸åŒçš„åœ°å€å¹¶ä¸”ä½¿ç”¨è®¡æ•°</span><span class="o">+</span><span class="mi">1</span><span class="err">ã€‚</span>
<span class="err">ç§»åŠ¨</span><span class="o">:</span>
<span class="err">è°ƒç”¨åˆæˆçš„ç§»åŠ¨æ„é€ å‡½æ•°ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œå…±äº«æŒ‡é’ˆæŒ‡å‘åŸå§‹å…±äº«æŒ‡é’ˆæŒ‡å‘çš„åœ°å€ã€‚ç§»åŠ¨æ“ä½œåï¼Œæ–°å¯¹è±¡ä¸­å…±äº«æŒ‡é’ˆçš„ä½¿ç”¨è®¡æ•°ä¸º</span><span class="mi">1</span><span class="err">ï¼ŒåŸå§‹å¯¹è±¡çš„æŒ‡é’ˆå˜æˆäº†</span><span class="nb">nullptr</span><span class="err">ã€‚</span>
<span class="err">èµ‹å€¼</span><span class="o">:</span>
<span class="err">è°ƒç”¨åˆæˆçš„èµ‹å€¼æ„é€ å‡½æ•°ï¼Œå’Œæ‹·è´æ„é€ å‡½æ•°ç±»ä¼¼ã€‚</span>
<span class="err">é”€æ¯</span><span class="o">:</span>
<span class="err">è°ƒç”¨åˆæˆææ„å‡½æ•°ã€‚ä½¿ç”¨æ¬¡æ•°</span><span class="o">-</span><span class="mi">1</span><span class="err">ã€‚å¦‚æœè®¡æ•°å˜ä¸ºé›¶ï¼Œå°†åˆ é™¤æ™ºèƒ½æŒ‡é’ˆæ‰€æŒ‡å‘çš„èµ„æºã€‚</span>
<span class="p">(</span><span class="mf">15.33</span><span class="p">)</span>
<span class="n">Query_base</span><span class="err">æ˜¯ä¸€ä¸ªæŠ½è±¡åŸºç±»ï¼Œä¸å…è®¸ç›´æ¥å£°æ˜å…¶å¯¹è±¡ã€‚</span>
</code></pre></div></div>

<p><img src="https://img-blog.csdnimg.cn/20191107173844215.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNjg1MDEy,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" />
<strong>å› ä¸ºè¿™åé¢çš„ä»£ç å¤ªé•¿äº†ï¼Œæ‰€ä»¥é‡æ–°å†™äº†ä¸€ç¯‡<a href="https://blog.csdn.net/qq_42685012/article/details/106276866">ç‚¹æˆ‘</a></strong></p>
<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="mf">15.34</span><span class="p">)</span>
<span class="n">Query</span> <span class="n">q</span> <span class="o">=</span> <span class="n">Query</span><span class="p">(</span><span class="s">"fiery"</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">Query</span><span class="p">(</span><span class="s">"bird"</span><span class="p">)</span> <span class="o">|</span> <span class="n">Query</span><span class="p">(</span><span class="s">"wind"</span><span class="p">);</span>
<span class="n">a</span><span class="o">&gt;</span>
<span class="n">WordQuery</span><span class="o">::</span><span class="n">WordQuery</span><span class="p">(</span><span class="n">wind</span><span class="p">)</span>
<span class="n">Query</span><span class="o">::</span><span class="n">Query</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">s</span><span class="p">)</span> <span class="n">where</span> <span class="n">s</span><span class="o">=</span><span class="n">wind</span>
<span class="n">WordQuery</span><span class="o">::</span><span class="n">WordQuery</span><span class="p">(</span><span class="n">bird</span><span class="p">)</span>
<span class="n">Query</span><span class="o">::</span><span class="n">Query</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">s</span><span class="p">)</span> <span class="n">where</span> <span class="n">s</span><span class="o">=</span><span class="n">bird</span>
<span class="n">WordQuery</span><span class="o">::</span><span class="n">WordQuery</span><span class="p">(</span><span class="n">fiery</span><span class="p">)</span>
<span class="n">Query</span><span class="o">::</span><span class="n">Query</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">s</span><span class="p">)</span> <span class="n">where</span> <span class="n">s</span><span class="o">=</span><span class="n">fiery</span>
<span class="n">BinaryQuery</span><span class="o">::</span><span class="n">BinaryQuery</span><span class="p">()</span>  <span class="n">where</span> <span class="n">s</span><span class="o">=&amp;</span>
<span class="n">AndQuery</span><span class="o">::</span><span class="n">AndQuery</span><span class="p">()</span>
<span class="n">Query</span><span class="o">::</span><span class="n">Query</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">Query_base</span><span class="o">&gt;</span> <span class="n">query</span><span class="p">)</span>
<span class="n">BinaryQuery</span><span class="o">::</span><span class="n">BinaryQuery</span><span class="p">()</span>  <span class="n">where</span> <span class="n">s</span><span class="o">=|</span>
<span class="n">OrQuery</span><span class="o">::</span><span class="n">OrQuery</span>
<span class="n">Query</span><span class="o">::</span><span class="n">Query</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">Query_base</span><span class="o">&gt;</span> <span class="n">query</span><span class="p">)</span>
<span class="n">b</span><span class="o">&gt;</span>
<span class="n">Query</span><span class="o">::</span><span class="n">rep</span><span class="p">()</span>
<span class="n">BinaryQuery</span><span class="o">::</span><span class="n">rep</span><span class="p">()</span>
<span class="n">Query</span><span class="o">::</span><span class="n">rep</span><span class="p">()</span>
<span class="n">WordQuery</span><span class="o">::</span><span class="n">rep</span><span class="p">()</span>
<span class="n">Query</span><span class="o">::</span><span class="n">rep</span><span class="p">()</span>
<span class="n">BinaryQuery</span><span class="o">::</span><span class="n">rep</span><span class="p">()</span>
<span class="n">Query</span><span class="o">::</span><span class="n">rep</span><span class="p">()</span>
<span class="n">WordQuery</span><span class="o">::</span><span class="n">rep</span><span class="p">()</span>
<span class="n">Query</span><span class="o">::</span><span class="n">rep</span><span class="p">()</span>
<span class="n">WordQuery</span><span class="o">::</span><span class="n">rep</span><span class="p">()</span>
<span class="n">c</span><span class="o">&gt;</span>
<span class="n">Query</span><span class="o">::</span><span class="n">eval</span><span class="p">()</span>
<span class="n">OrQuery</span><span class="o">::</span><span class="n">eval</span><span class="p">()</span>
<span class="n">Query</span><span class="o">::</span><span class="n">eval</span><span class="p">()</span>
<span class="n">WordQuery</span><span class="o">::</span><span class="n">eval</span><span class="p">()</span>
<span class="n">Query</span><span class="o">::</span><span class="n">eval</span><span class="p">()</span>
<span class="n">AndQuery</span><span class="o">::</span><span class="n">eval</span><span class="p">()</span>
<span class="n">Query</span><span class="o">::</span><span class="n">eval</span><span class="p">()</span>
<span class="n">WordQuery</span><span class="o">::</span><span class="n">eval</span><span class="p">()</span>
<span class="n">Query</span><span class="o">::</span><span class="n">eval</span><span class="p">()</span>
<span class="n">WordQuery</span><span class="o">::</span><span class="n">eval</span><span class="p">()</span>
<span class="n">BinaryQuery</span><span class="o">::</span><span class="n">rep</span><span class="p">()</span>
<span class="n">Query</span><span class="o">::</span><span class="n">rep</span><span class="p">()</span>
<span class="n">WordQuery</span><span class="o">::</span><span class="n">rep</span><span class="p">()</span>
<span class="n">Query</span><span class="o">::</span><span class="n">rep</span><span class="p">()</span>
<span class="n">WordQuery</span><span class="o">::</span><span class="n">rep</span><span class="p">()</span>
<span class="n">BinaryQuery</span><span class="o">::</span><span class="n">rep</span><span class="p">()</span>
<span class="n">Query</span><span class="o">::</span><span class="n">rep</span><span class="p">()</span>
<span class="n">WordQuery</span><span class="o">::</span><span class="n">rep</span><span class="p">()</span>
<span class="n">Query</span><span class="o">::</span><span class="n">rep</span><span class="p">()</span>
<span class="n">BinaryQuery</span><span class="o">::</span><span class="n">rep</span><span class="p">()</span>
<span class="n">Query</span><span class="o">::</span><span class="n">rep</span><span class="p">()</span>
<span class="n">WordQuery</span><span class="o">::</span><span class="n">rep</span><span class="p">()</span>
<span class="n">Query</span><span class="o">::</span><span class="n">rep</span><span class="p">()</span>
<span class="n">WordQuery</span><span class="o">::</span><span class="n">rep</span><span class="p">()</span>
<span class="p">(</span><span class="mf">15.35</span><span class="p">)</span>
<span class="p">(</span><span class="mf">15.36</span><span class="p">)</span>
<span class="p">(</span><span class="mf">15.37</span><span class="p">)</span>
<span class="p">(</span><span class="mf">15.38</span><span class="p">)</span>
<span class="mi">1</span><span class="o">&gt;</span><span class="err">ä¸åˆæ³•ï¼Œ</span><span class="n">BinaryQuery</span><span class="err">æ˜¯æŠ½è±¡ç±»</span>
<span class="mi">2</span><span class="o">&gt;</span><span class="err">ä¸åˆæ³•ï¼Œ</span><span class="o">&amp;</span><span class="err">è¿”å›</span><span class="n">Query</span><span class="err">ç±»ï¼Œ</span><span class="n">AndQuery</span><span class="err">ä¸èƒ½è½¬æ¢åˆ°</span><span class="n">Query</span><span class="err">ç±»</span>
<span class="mi">3</span><span class="o">&gt;</span><span class="err">ä¸åˆæ³•ï¼ŒåŒä¸Š</span>
</code></pre></div></div>

<p><img src="https://img-blog.csdnimg.cn/20191107173902496.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNjg1MDEy,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="mf">15.39</span><span class="p">)</span>
<span class="p">(</span><span class="mf">15.40</span><span class="p">)</span>
<span class="err">ä¸ä¼š</span><span class="n">rhs</span><span class="err">ç©ºé›†åˆ™è¿”å›</span><span class="n">lhs</span><span class="err">çš„ç»“æœï¼Œ</span><span class="n">lhs</span><span class="err">ç©ºé›†åˆ™è¿”å›</span><span class="n">rhs</span><span class="err">çš„ç»“æœï¼Œä¸¤ä¸ªéƒ½æ˜¯ç©ºé›†åˆ™è¿”å›ç©ºç»“æœ</span>
<span class="p">(</span><span class="mf">15.41</span><span class="p">)</span>
<span class="p">(</span><span class="mf">15.42</span><span class="p">)</span>
</code></pre></div></div>

:ET